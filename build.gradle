plugins {
    id 'java'
    id 'org.jetbrains.intellij' version '0.4.21'
}

group 'org.testshift'
version '0.1.3-SNAPSHOT'

repositories {
    mavenCentral()
}

dependencies {
    testCompile group: 'junit', name: 'junit', version: '4.12'
    compile fileTree(dir: 'src/main/resources/dspot', include: ['*.jar'])
}

// See https://github.com/JetBrains/gradle-intellij-plugin/
intellij {
    version '2020.2'
    plugins 'java'
}

patchPluginXml {
    changeNotes """
     Fix:<br>  
     - start DSpot Process<br>
     <br>
     Improve:<br>
     - write DSpot output to file, creates new folder `test-cube`<br>
     - options to configure the amplification with DSpot<br>
     <br>
     Features:<br>
     - inspect amplified test cases in new tool window<br>
     - add test cases to your original test suite with one click<br>
     - inspect DSpot terminal output after amplification<br>
     """
}

publishPlugin {
    token = System.getenv("ORG_GRADLE_PROJECT_intellijPublishToken")
}
